---
sidebar_position: 8
description: Common issues and solutions for component library development
---

# Troubleshooting

This guide covers common issues and their solutions when working with the component library.

## Theme CSS Not Updating

**Problem:** Changes to design tokens don't appear in Storybook or dev server.

**Solution:** Rebuild the design token package to regenerate CSS variables:

```bash
pnpm --filter @designgreat/lib-design-token build
```

Then restart Storybook:

```bash
pnpm --filter @designgreat/lib-web-component storybook
```

## Storybook Fonts Missing

**Problem:** Fonts don't load in Storybook.

**Solution:** Fonts are imported directly from `@designgreat/lib-design-token/font` in Storybook's preview configuration. If fonts are missing:

1. Ensure the design token package is built:

```bash
pnpm --filter @designgreat/lib-design-token build
```

2. Restart Storybook:

```bash
pnpm --filter @designgreat/lib-web-component storybook
```

3. Check the browser Network tab to verify font files are loading from the correct path.

## Tailwind Utilities Not Generated

**Problem:** Utility classes don't work in components or stories.

**Solution:** Ensure Tailwind is processing the correct files. Check `tailwind.config.ts`:

```typescript
// tailwind.config.ts
content: [
  './src/**/*.{js,jsx,ts,tsx}',
  './.storybook/**/*.{js,jsx,ts,tsx}'
]
```

Restart the dev server to regenerate utilities.

## TypeScript Build Errors

**Problem:** TypeScript fails to compile.

**Solution:** Ensure the design token package is built (tokens are imported at runtime):

```bash
pnpm --filter @designgreat/lib-design-token build
```

Then run type check:

```bash
pnpm --filter @designgreat/lib-web-component typecheck
```

## Test Failures

**Problem:** Tests fail after component or token changes.

**Solution:**

1. Run tests in watch mode to see detailed errors:

```bash
pnpm --filter @designgreat/lib-web-component test -- --watch
```

2. Update snapshots if needed:

```bash
pnpm --filter @designgreat/lib-web-component test -- -u
```

## Theme Desync in Storybook

**Problem:** Toggling light/dark theme in Storybook does nothing.

**Solution:** Ensure the preview iframe body has `.dg-theme-dark` class when dark theme is selected (light theme has no class). Re-running the dev server typically fixes it:

```bash
pnpm --filter @designgreat/lib-web-component storybook
```

## Token Mismatch

**Problem:** Tailwind refuses to emit a new token class.

**Solution:** Clear Tailwind cache and restart:

```bash
rm -rf node_modules/.cache
pnpm --filter @designgreat/lib-web-component storybook
```

## Story Fails to Load

**Problem:** Story doesn't render in Storybook.

**Solution:** Check the browser console for async import errors. Storybook surfaces stack traces pointing to the offending story file.

Common causes:
- Syntax errors in story file
- Missing imports
- Invalid component props
- Circular dependencies

## Hot Reload Not Working

**Problem:** Changes to components or stories don't hot reload.

**Solution:**

1. Check that files are covered by Tailwind `content` globs
2. Restart the dev server
3. Clear browser cache (Cmd+Shift+R)

## Build Errors

**Problem:** Build fails with errors.

**Solution:**

1. Ensure design tokens are built first:

```bash
pnpm --filter @designgreat/lib-design-token build
```

2. Clean build artifacts:

```bash
pnpm --filter @designgreat/lib-web-component run clean
```

3. Run full build:

```bash
pnpm --filter @designgreat/lib-web-component build
```

## Getting Help

If you encounter an issue not covered here:

1. Check the [Storybook documentation](https://storybook.js.org/docs)
2. Review the [monorepo contributing guide](https://github.com/graezykev/designgreat/blob/main/docs/CONTRIBUTING.md)
3. Search existing [GitHub issues](https://github.com/graezykev/designgreat/issues)
4. Ask in team chat or open a new issue

## Next Steps

- [Storybook Workflow](./storybook-workflow) – Development workflow
- [Architecture](./architecture) – Package structure
- [Get Started](./get-started) – Setup instructions

