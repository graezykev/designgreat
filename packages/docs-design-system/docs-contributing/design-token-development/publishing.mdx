---
sidebar_position: 7
description: PR process, release, and CI/CD
---

# Publishing

This guide covers the pull request process and release procedures for the design token package.

## Before Opening a PR

- [ ] Run local checks:
    - `pnpm run lint && pnpm run typecheck && pnpm run test && pnpm run validate`
- [ ] Build and commit generated files (`src/generated/`)
    - `pnpm --filter=@designgreat/lib-design-token run build`
    - `git add ...` & `git commit ...`
- [ ] Update documentation (if needed)
- [ ] [Create changeset](/contributing/changeset-workflow)

---

## CI Pipeline

### On Every PR

```mermaid
flowchart LR
    PR[PR] --> A[Changeset File Check] --> B[Changeset Validation]
    PR --> C[Lint/Typecheck/Test] --> D[Validate] --> E[Build]
```

| Step | Command | Purpose |
|------|---------|---------|
| Changeset File Check | `ls .changeset/*.md` | Ensures changeset file exists (fast fail) |
| Changeset Validation | `pnpm changeset status` | Validates changeset content |
| Install | `pnpm install` | Install dependencies |
| Lint | `pnpm run lint` | Code style checks |
| Typecheck | `pnpm run typecheck` | TypeScript validation |
| Test | `pnpm run test` | Run unit tests |
| Validate | `pnpm run validate` | Token structure validation |
| Build | `pnpm run build` | Compile and bundle |

ðŸ“„ Workflow files: [check-code-quality.yml](https://github.com/graezykev/designgreat/blob/main/.github/workflows/check-code-quality.yml) Â· [check-changeset.yml](https://github.com/graezykev/designgreat/blob/main/.github/workflows/check-changeset.yml)

### On Merge to Main

```mermaid
flowchart LR
    A[Merge] --> B[changeset version]
    B --> C[Bump Versions] & D[Update Dependents] & E[Update Changelogs]
    C & D & E --> F[Auto Commit] --> G[changeset publish] --> H[npm publish]
```

ðŸ“„ Workflow file: [version-publish-packages.yml](https://github.com/graezykev/designgreat/blob/main/.github/workflows/version-publish-packages.yml)

---

## Package Distribution

### Exports

| Export | Format | Description |
|--------|--------|-------------|
| `.` | ESM/CJS | Runtime helpers, theme utilities |
| `./css` | CSS | All theme variables |
| `./css/light` | CSS | Light theme only |
| `./css/dark` | CSS | Dark theme only |
| `./font` | Assets | Font files (WOFF2) |

### Published Files

- `dist/` â€” JS, CSS, fonts, and TypeScript definitions
- `README.md` â€” Package documentation

---

## Next Steps

- Learn the [Changeset Workflow](/contributing/changeset-workflow) for versioning
- Review [Testing & Validation](./testing-validation) for quality checks
- Check [Troubleshooting](./troubleshooting) for common issues

