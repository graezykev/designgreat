---
sidebar_position: 4
description: Font asset architecture and build process
---

# Font Assets

This page explains the technical architecture for font assets in the design token package.

:::tip For Consumers
For font loading options and usage examples, see the [Fonts Guide](/design-token/guides/fonts).
:::

## Architecture Overview

The `@designgreat/lib-design-token` package owns and distributes font assets:

```
lib-design-token/
├── dist/font/
│   ├── font-face.css        # @font-face declarations
│   └── *.woff2               # 108 font files
└── package.json exports:
    "/font" → "./dist/font/font-face.css"
```

### Why Design Tokens Own Fonts

Fonts are treated as **design assets** (like colors and spacing):

- ✅ Typography is a core design decision
- ✅ Font files are versioned with design tokens
- ✅ Consistent font loading across all consumers
- ✅ Single source of truth for visual design

---

## Font Format: WOFF2 Only

We only include `.woff2` format:

| Reason | Benefit |
|--------|---------|
| Best compression | 30% smaller than woff, 50%+ smaller than ttf |
| Browser support | Chrome 36+, Firefox 39+, Safari 12+, Edge 14+ (~98% coverage) |
| Simplified maintenance | Single format to manage |

**Legacy browsers:** Consumers can use Google Fonts CDN or convert formats. See [Fonts Guide](/design-token/guides/fonts#alternative-google-fonts-cdn).

---

## Unicode Range Subsetting

Each font file is split by **unicode range** (character sets), enabling on-demand loading:

| Subset | Unicode Range | Characters | Priority |
|--------|---------------|------------|----------|
| **Latin** | U+0000-00FF | A-Z, 0-9, common symbols | High |
| **Latin Extended** | U+0100-024F | Accented characters | Medium |
| **Greek** | U+0370-03FF | Greek alphabet | Low |
| **Cyrillic** | U+0400-04FF | Cyrillic alphabet | Low |
| **Vietnamese** | U+1EA0-1EFF | Vietnamese characters | Low |

### How It Works

```css
@font-face {
  font-family: 'Roboto';
  src: url('./Roboto-latin-regular-normal.woff2') format('woff2');
  font-weight: 400;
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, ...;
}

@font-face {
  font-family: 'Roboto';
  src: url('./Roboto-greek-regular-normal.woff2') format('woff2');
  font-weight: 400;
  unicode-range: U+0370-03FF;
}
```

The browser:
1. Parses CSS and discovers multiple `@font-face` rules for same family/weight
2. Checks page content for characters used
3. **Downloads only the subsets needed** (e.g., Latin only for English pages)
4. Loads additional subsets on-demand if new characters appear

**Performance Impact:** English-only pages download only ~15-20% of total font files (~12 KB vs ~60 KB).

---

## Font Files Inventory

**108 .woff2 files** covering:
- 6 weights × 2 styles (normal/italic) = 12 variants
- 9 unicode subsets per variant

### File Naming Convention

```
Roboto-{subset}-{weight}-{style}.woff2

Examples:
- Roboto-latin-regular-normal.woff2      (Latin, 400, Normal)
- Roboto-latin-bold-italic.woff2         (Latin, 700, Italic)
- Roboto-greek-medium-normal.woff2       (Greek, 500, Normal)
```

### Package Size

- Individual files: 3-15 KB each
- Total: ~1.5 MB uncompressed (~400-500 KB gzipped)

---

## Build Process

### Font Source

Fonts are downloaded during build from Google Fonts API:

```javascript
// scripts/style-dictionary/prebuild-download-fonts.js
const FONT_API_URL = 'https://google-webfonts-helper.herokuapp.com/api/fonts/roboto'
```

### Build Steps

1. **Download** — Fetch font metadata and files from API
2. **Generate** — Create `font-face.css` with proper paths
3. **Copy** — Copy font files to `dist/font/`
4. **Verify** — Check all 108 files are present

### Output Structure

```
dist/font/
├── font-face.css                          # All @font-face declarations
├── Roboto-latin-thin-normal.woff2
├── Roboto-latin-thin-italic.woff2
├── ... (108 total files)
└── Roboto-vietnamese-black-italic.woff2
```

---

## Next Steps

- [Fonts Guide](/design-token/guides/fonts) — Consumer usage and options
- [Build System](./build-system) — Full build pipeline details
- [Development Workflow](./development-workflow) — Working with fonts during development
