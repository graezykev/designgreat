---
sidebar_position: 4
---

# Theme Switching

Apply theme classes to switch between light and dark modes dynamically.

## Basic Theme Switching

```tsx
import { useState } from 'react'
import { createThemeConfig } from '@designgreat/design-token-support'

// Create theme configurations
const lightTheme = createThemeConfig('light')
const darkTheme = createThemeConfig('dark')

// Get theme class names
console.log(lightTheme.className) // "dg-theme-light"
console.log(darkTheme.className) // "dg-theme-dark"

// Apply to a wrapper element
function App() {
  const [isDark, setIsDark] = useState(false)
  const theme = isDark ? darkTheme : lightTheme

  return (
    <div className={theme.className}>
      <button onClick={() => setIsDark(!isDark)}>
        Toggle Theme
      </button>
      {/* Application content */}
    </div>
  )
}
```

## Direct Class Name Usage

For simple use cases where you only need the class name:

```typescript
import { getThemeClassName } from '@designgreat/design-token-support'

const darkClass = getThemeClassName('dark') // "dg-theme-dark"
document.body.className = darkClass
```

## Applying Themes Programmatically

You can also apply themes directly to the document:

```typescript
import { createThemeConfig } from '@designgreat/design-token-support'

const lightTheme = createThemeConfig('light')
const darkTheme = createThemeConfig('dark')

// Remove existing theme classes
document.body.classList.remove(lightTheme.className, darkTheme.className)

// Add the desired theme class
document.body.classList.add(darkTheme.className)
```

## Respecting System Preferences

You can detect and respect the user's system color scheme preference:

```tsx
import { useState, useEffect } from 'react'
import { createThemeConfig } from '@designgreat/design-token-support'

function App() {
  const [isDark, setIsDark] = useState(() => {
    // Check system preference on mount
    return window.matchMedia('(prefers-color-scheme: dark)').matches
  })

  useEffect(() => {
    // Listen for system preference changes
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')
    const handleChange = (e: MediaQueryListEvent) => setIsDark(e.matches)
    
    mediaQuery.addEventListener('change', handleChange)
    return () => mediaQuery.removeEventListener('change', handleChange)
  }, [])

  const theme = isDark ? createThemeConfig('dark') : createThemeConfig('light')

  return <div className={theme.className}>{/* Your app */}</div>
}
```

## Persisting Theme Selection

To persist the user's theme choice:

```tsx
import { useState, useEffect } from 'react'
import { createThemeConfig } from '@designgreat/design-token-support'

function App() {
  const [isDark, setIsDark] = useState(() => {
    // Load from localStorage or default to system preference
    const saved = localStorage.getItem('theme')
    if (saved) return saved === 'dark'
    return window.matchMedia('(prefers-color-scheme: dark)').matches
  })

  useEffect(() => {
    // Save to localStorage whenever it changes
    localStorage.setItem('theme', isDark ? 'dark' : 'light')
  }, [isDark])

  const theme = isDark ? createThemeConfig('dark') : createThemeConfig('light')

  return (
    <div className={theme.className}>
      <button onClick={() => setIsDark(!isDark)}>
        Toggle Theme
      </button>
      {/* Your app */}
    </div>
  )
}
```

## How Theme Switching Works

Themes work by switching CSS variable values. All components and styles use CSS variables like `var(--dg-color-background-default)`, which automatically update when a theme class is applied to an ancestor element.

The generated CSS looks like this:

```css
:root {
  --dg-color-background-default: #ffffff;
  /* ... more light theme variables */
}

.dg-theme-dark {
  --dg-color-background-default: #1a1a1a;
  /* ... more dark theme variables */
}
```

When you apply `.dg-theme-dark` to a parent element, all descendants automatically use the dark theme values.

## Next Steps

- Learn about [CSS Integration](./css-integration.mdx) options
- See [Runtime APIs](./api/runtime-apis.mdx) for more control
- Check [Tailwind CSS Integration](./tailwind-integration.mdx) for utility classes

